<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Compatibility Engine</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: auto;
      padding: 20px;
    }
    .option {
      display: block;
      margin: 10px 0;
      padding: 10px;
      width: 100%;
    }
    input[type="text"], textarea {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
    }
  </style>
</head>
<body>

<h2 id="question"></h2>
<div id="options"></div>

<script>
const questions = [
  // A. Identity through taste
  { type: "text", q: "List up to 5 favourite movies (comma separated):" },
  { type: "text", q: "List up to 5 favourite series (comma separated):" },
  { type: "mcq", q: "What matters more to you in stories?", a: ["Characters", "Plot", "Ideas", "Emotion"] },
  { type: "mcq", q: "Music you return to most often:", a: ["Lyrics", "Melody", "Mood", "Energy"] },
  { type: "mcq", q: "You prefer:", a: ["Rewatching favourites", "Finding new things"] },

  // B. How you live
  { type: "mcq", q: "Your ideal weekend looks like:", a: ["Quiet & slow", "Planned & active", "Mixed"] },
  { type: "mcq", q: "You recharge best by:", a: ["Being alone", "With one person", "In a group"] },
  { type: "mcq", q: "Your personal space is usually:", a: ["Organized", "Lived-in", "Chaotic"] },
  { type: "mcq", q: "You prefer conversations that are:", a: ["Deep", "Light", "Situational"] },
  { type: "mcq", q: "Free time feels best when it is:", a: ["Unstructured", "Loosely planned", "Structured"] },

  // C. Emotional & relational style
  { type: "mcq", q: "During conflict, you usually:", a: ["Withdraw", "Engage immediately", "Need time then talk"] },
  { type: "mcq", q: "When upset, you want your partner to:", a: ["Give space", "Check in", "Act normally"] },
  { type: "mcq", q: "You express care mostly through:", a: ["Words", "Actions", "Presence"] },
  { type: "mcq", q: "Silence with someone you like feels:", a: ["Comfortable", "Awkward", "Heavy"] },
  { type: "mcq", q: "Emotional honesty is important even if it:", a: ["Creates discomfort", "Causes conflict", "Changes nothing"] },

  // D. Values
  { type: "mcq", q: "Are you religious?", a: ["Yes", "Somewhat", "No"] },
  { type: "mcq", q: "Do you want to date someone from the same religion?", a: ["Yes", "No", "Not important"] },
  { type: "mcq", q: "Shared core values are:", a: ["Essential", "Important", "Flexible"] },
  { type: "mcq", q: "On disagreement, what matters more?", a: ["Being understood", "Finding a solution"] },
  { type: "mcq", q: "Loyalty matters most when it is:", a: ["Tested", "Consistent", "Quiet"] },

  // E. Boundaries & deal-breakers
  { type: "text", q: "One non-negotiable you have in a partner:" },
  { type: "text", q: "One thing you can adapt on over time:" },
  { type: "mcq", q: "How do you feel about long-term commitment?", a: ["Actively want it", "Open to it", "Unsure"] },
  { type: "mcq", q: "People fundamentally:", a: ["Change", "Stay mostly the same"] },
  { type: "mcq", q: "Independence in a relationship feels:", a: ["Essential", "Balanced", "Secondary"] },

  // F. Growth & meaning
  { type: "mcq", q: "You are motivated more by:", a: ["Curiosity", "Stability", "Purpose"] },
  { type: "mcq", q: "You feel fulfilled when you are:", a: ["Learning", "Creating", "Helping", "Building"] },
  { type: "mcq", q: "A relationship should feel like:", a: ["A partnership", "A refuge", "A journey"] },
  { type: "mcq", q: "Do you believe attraction can grow with time?", a: ["Yes", "Maybe", "No"] },
  { type: "mcq", q: "You fear more:", a: ["Ending up alone", "Ending up misunderstood"] },

  // G. What matters
  { type: "text", q: "One thing a potential partner must know about you early:" },
  { type: "text", q: "One thing you would want to know early about them:" },
  { type: "text", q: "What makes you feel genuinely seen?" },
  { type: "text", q: "What drains you emotionally over time?" },
  { type: "mcq", q: "Are you willing to let an algorithm prioritize compatibility over instant spark?", a: ["Yes", "Maybe", "No"] }
];

let index = 0;
let responses = [];

function renderQuestion() {
  const q = questions[index];
  document.getElementById("question").innerText = q.q;
  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  if (q.type === "mcq") {
    q.a.forEach(option => {
      const btn = document.createElement("button");
      btn.className = "option";
      btn.innerText = option;
      btn.onclick = () => submit(option);
      optionsDiv.appendChild(btn);
    });
  }

  if (q.type === "text") {
    const input = document.createElement("textarea");
    input.rows = 3;
    optionsDiv.appendChild(input);

    const btn = document.createElement("button");
    btn.innerText = "Next";
    btn.onclick = () => submit(input.value);
    optionsDiv.appendChild(btn);
  }
}

function submit(answer) {
  responses.push({ question: questions[index].q, answer });
  index++;

  if (index < questions.length) {
    renderQuestion();
  } else {
    document.body.innerHTML = "<h2>Thank you.</h2><p>Your responses have been recorded.</p>";
    console.log(responses);
  }
}

renderQuestion();
</script>

</body>
</html>
